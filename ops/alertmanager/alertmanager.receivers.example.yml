# Example receiver values for real on-call routing.
# Preferred workflow:
# 1) Put values into .env (ALERTMANAGER_* vars).
# 2) Generate config with:
#    powershell -ExecutionPolicy Bypass -File scripts/render_alertmanager_oncall_config.ps1
# 3) Start compose with docker-compose.alerting.yml override.
# Manual merge into ops/alertmanager/alertmanager.yml is possible but not recommended.

receivers:
  - name: slack-critical
    slack_configs:
      - api_url: "https://hooks.slack.com/services/REPLACE/ME"
        channel: "#ops-alerts"
        send_resolved: true
        title: "{{ .CommonLabels.alertname }} ({{ .Status }})"
        text: "<!channel> \U0001F6A8 {{ .CommonAnnotations.summary }}\n{{ .CommonAnnotations.description }}"

  - name: pagerduty-critical
    pagerduty_configs:
      - routing_key: "REPLACE_WITH_PAGERDUTY_INTEGRATION_KEY"
        severity: "critical"
        send_resolved: true
        description: "{{ .CommonAnnotations.summary }}"

  - name: email-warning
    email_configs:
      - to: "ops@example.com"
        from: "alerts@example.com"
        smarthost: "smtp.example.com:587"
        auth_username: "smtp-user"
        auth_password: "smtp-password"
        require_tls: true
